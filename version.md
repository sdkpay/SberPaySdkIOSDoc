# [SberPaySdkIOSDoc](https://sdkpay.github.io/SberPaySdkIOSDoc/)

#### [Бординг](https://sdkpay.github.io/SberPaySdkIOSDoc/boarding) | [Регистрация заказов в платежном шлюзе Сбера](https://sdkpay.github.io/SberPaySdkIOSDoc/order_registration) | [Начало работы](https://sdkpay.github.io/SberPaySdkIOSDoc/start) | [Сценарии оплаты через SDK](https://sdkpay.github.io/SberPaySdkIOSDoc/payment_script) | [Работа в режиме посочницы](https://sdkpay.github.io/SberPaySdkIOSDoc/sandbox_mode) | [Вспомогательные структуры данных](https://sdkpay.github.io/SberPaySdkIOSDoc/data_structures) | [Актуальная версия SDK](https://sdkpay.github.io/SberPaySdkIOSDoc/version) | [Поддержка](https://sdkpay.github.io/SberPaySdkIOSDoc/support) | [FAQ](https://sdkpay.github.io/SberPaySdkIOSDoc/faq)

<br>

# Актуальная версия

## Версия 2.6

### 2.6.2

- Исправлено завершение сценария оплаты при ошибке сбора внутренней аналитики

### 2.6.1

- Фиĸс для работы с внутренними зависимостями

### 2.6.0

- Добавлен фунĸционал оплаты связĸой с подтвержением по ОТП

<br>

## Версия 2.5

### 2.5.2

- Исправлен ряд багов не влияющих на процесс оплаты

### 2.5.1

- Исправление бага с неĸорреĸтным отображением бонусов «Спасибо» в сценарии оплаты бонусами

### 2.5.0

- Добавлен фунĸционал оплаты платежными счетами

<br>

## Версия 2.4

### 2.4.5

- Исправлен ряд багов не влияющих на процесс оплаты

### 2.4.4

- Обновлены внутренние зависимости
- Реализован сервис для проверĸи параметров **info.plist** мерчанта необходимых для ĸорреĸтной работы

### 2.4.3

- Исправлен баг, из-за ĸоторого SberPay мог требовать пермиссию на Bluetooth

### 2.4.2

- Исправлен ряд багов не влияющих на процесс оплаты

### 2.4.1

- Пермиссия *NSFaceIDUsageDescription* стала опциональной
- Расширено логгирование

### 2.4.0

- Добавлен функционал списания бонусов Спасибо
- Исправлен ряд багов

<br>

## Версия 2.3

### 2.3.2

- Добавлен метод `logout`, позволяющий удалять локально сохраненный рефреш-токен, если таковой присутствует

<br>

## Версия 2.2

### 2.2.5

- Добавлена поддержка *SwiftUI*
- Исправлены внутренние ошибки

### 2.2.4

- Добавлен `localSessionId` параметр в `callback` оплаты для более оперативного разбора инцидентов

### 2.2.3

- Изменен инструмент аналитики
- Исправлена ошибка двойного колбека при недостаточности символов в `bankInvoiceId`

### 2.2.2

- Изменены текстовки на экране ошибок

### 2.2.1

- Добавлен *Privacy Manifest*
- Добавлена возможность выбора приоритетной карты при ее отсутствии
- Исправлены ошибки обработки запросов
- Исправлена ошибка закрытия сдк позже, чем отработал колбэк
- Оптимизация процесса конфигурации сдк
- Возможность передачи схемы сбола при оплате
- Убрана необходимость прописывать адрес *cms-res.online.sberbank.ru* в **info.plist**

### 2.2.0

- Уменьшен размер библиотеки
- Добавлены тоглы на отключение результирующих экранов
- Добавлены тоглы на отключение логов в режиме песочницы
- Добавлено отображение начисляемых за оплату бонусов «Спасибо»
- Улучшена производительность

<br>

## Версия 2.1

### 2.1.8

- Улучшена производительность

### 2.1.7

- Исправлен ряд мелких UI багов

### 2.1.6

- Исправлен ряд мелких UI багов

### 2.1.5

- Исправлен ряд мелких UI багов

### 2.1.4

- Исправлен ряд мелких багов

### 2.1.3

- Исправлен ряд мелких багов

### 2.1.2

- Исправлена несовместимость с библиотекой *Lottie*
- Исправлен ряд мелких багов

### 2.1.1

- Выполнен редизайн SDK
- Удалены пермисии на *bluetooth* и *wi-fi*. Если вы использовали предыдущие версии SDK, то можно удалить `NSBluetoothAlwaysUsageDescription`, `NSBluetoothAlwaysUsageDescription`, `NSBluetoothPeripheralUsageDescription`

<br>

## Версия 2.0

### 2.0.6

- Исправлены внутренние баги

### 2.0.5

- Ускорена работа сервисов

### 2.0.4

- Исправлен UI баг лоадера при старте приложения

### 2.0.3

- Исправлена проблема c потерей `callback` в методах оплаты при "смахивании шторки"

### 2.0.2

- Исправлена проблема с передачей `apiKey` в методе `Setup`
- Исправлены мелкие UI баги

### 2.0.1

- Доступна аворизация через рефреш-токен, после первого входа
- Подтверждение оплаты через СМС при необходимости
- Изменены необходимые пермиссии к **info.plist**
- В метод автоматической оплаты добавлен обязательный парметр `oderNumber`
- Исправлены мелкие UI баги

<br>

## Версия 1.1

### 1.1.4

- Ко всем методам оплаты и получения токена добавлен новый стейт `Cancel`, стейт отрабатвает в случае, если мерчант самостоятельно закрыл SDK
- Доработан функционал «Плати частями»
- Доработаны коллбеки для возвращения правильного статуса оплаты
- Исправлены мелкие UI баги

### 1.1.1

- Метод `payWithOrderId` помечен, как *deprecated* и будет удален из публичного API SberPay SDK в одном из следующих релизов. Используйте `payWithBankInvoiceId`, идентичный по функционалу
- В методе `pay` параметр `orderId` заменен на `bankInvoiceId` соответственно
- В структуре `SPaymentTokenRequest` параметр `orderId` будет удален и заменен на `bankInvoiceId`
- Добавлена валидация параметра `bankInvoiceId` в методах `pay`, `payWithBankInvoiceId` и `payWithOrderId`
- Добавлена возможность передачи `ApiKey` в методах `payWithBankInvoiceId` и `getPaymentToken`
- Исправлена ошибка оплаты в ручном режиме с использованием BNPL (Плати частями)
- Исправлена ошибка с отсутствием закругления логотипа мерчанта для картинок с залитым цветным фоном
- Оптимизирован размер SDK
- Исправлены мелкие UI баги
